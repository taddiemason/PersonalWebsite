<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Zach's Interactive Terminal</title>
  <style>
    * {
      box-sizing: border-box;
    }

    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: monospace;
      background-color: black;
      color: #00FF00;
    }

    body {
      display: flex;
      flex-direction: column;
    }

    .terminal {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 16px;
      border: 2px solid #00FF00;
      box-shadow: 0 0 20px #00FF00;
      overflow-y: auto;
      max-width: 800px;
      width: 100%;
      margin: auto;
      background-color: black;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
      overscroll-behavior: contain;
    }

    .line {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
    }

    .prompt {
      margin-right: 5px;
      white-space: nowrap;
    }

    input {
      background: black;
      color: #00FF00;
      border: none;
      font-family: monospace;
      font-size: 1em;
      outline: none;
      flex: 1;
      min-width: 0;
      caret-color: #00FF00;
    }

    .output {
      margin-bottom: 12px;
      white-space: pre-wrap;
      word-break: break-word;
    }

    a {
      color: #00FF00;
      text-decoration: underline;
    }

    .cursor {
      display: inline-block;
      width: 10px;
      height: 1.2em;
      background-color: #00FF00;
      margin-left: 2px;
      animation: blink 1s step-start infinite;
    }

    @keyframes blink {
      50% { opacity: 0; }
    }

    @media (max-width: 600px) {
      .terminal {
        font-size: 0.9em;
        padding: 12px;
        height: auto;
      }

      input {
        font-size: 1em;
      }
    }
  </style>
</head>
<body>
  <div class="terminal" id="terminal">
    <div class="output">I'm Zach LaLime, a Network & IT Specialist passionate about building & maintaining secure, scalable systems. I love working with AWS, Azure, Cisco, and Linux.</div>
    <div class="output">Type <b>help</b> to get started.</div>
    <div class="line">
      <span class="prompt">$</span>
      <input type="text" id="commandInput" autofocus autocomplete="off" aria-label="Command input">
    </div>
  </div>

  <script>
    const terminal = document.getElementById('terminal');
    const commandInput = document.getElementById('commandInput');
    const isMobile = /Mobi|Android|iPhone/i.test(navigator.userAgent);
    const TYPING_SPEED = 5; // Lower = faster

    if (isMobile) {
      console.log("Mobile detected");
      commandInput.setAttribute("autocapitalize", "off");
      commandInput.setAttribute("autocorrect", "off");
    } else {
      console.log("Desktop detected");
      window.addEventListener('keydown', e => {
        if (e.ctrlKey && e.key === 'k') {
          e.preventDefault();
          commandInput.focus();
        }
      });
    }

    // Ensure input focuses after user interacts (fix for some mobile browsers)
    document.body.addEventListener('click', () => {
      commandInput.focus();
    }, { once: true });

    const welcomeMessage = `I'm Zach LaLime, a Network & IT Specialist passionate about building & maintaining secure, scalable systems. I love working with AWS, Azure, Cisco, and Linux.`;

    const commands = {
      help: `Available commands:\n- about\n- contact\n- resume\n- clear`,
      about: `I am currently enrolled at Erie Community College, studying for my CCNA...`,
      contact: `You can reach me here:\n- Zacharylalime@gmail.com\n- (716) 341-3678`,
      resume: `Resume:\n\nEDUCATION:\n- Erie Community College, Buffalo, NY...\n\n[Truncated for brevity]`
    };

    const alias = {
      cv: 'resume',
      bio: 'about',
      mail: 'contact'
    };

    let history = [];
    let historyIndex = -1;

    commandInput.addEventListener('keydown', function(event) {
      if (event.key === 'Enter') {
        event.preventDefault();
        const input = commandInput.value.trim();
        if (input) {
          addCommandLine(input);
          processCommand(input.toLowerCase());
          history.push(input);
          historyIndex = history.length;
          commandInput.value = '';
        }
      } else if (event.key === 'ArrowUp') {
        if (historyIndex > 0) {
          historyIndex--;
          commandInput.value = history[historyIndex];
        }
      } else if (event.key === 'ArrowDown') {
        if (historyIndex < history.length - 1) {
          historyIndex++;
          commandInput.value = history[historyIndex];
        } else {
          historyIndex = history.length;
          commandInput.value = '';
        }
      } else if (event.key === 'Tab') {
        event.preventDefault();
        autoComplete();
      }
    });

    function addCommandLine(input) {
      const line = document.createElement('div');
      line.className = 'line';
      line.innerHTML = `<span class="prompt">$</span> ${input}`;
      terminal.insertBefore(line, commandInput.parentNode);
      scrollToBottom();
    }

    function processCommand(cmd) {
      cmd = alias[cmd] || cmd;
      if (cmd === 'clear') {
        clearTerminal();
      } else if (commands[cmd]) {
        fakeLoading(() => {
          typeOutput(commands[cmd]);
        });
      } else {
        fakeLoading(() => {
          typeOutput(`Command not found: ${cmd}`);
        });
      }
    }

    function typeOutput(text) {
      const outputDiv = document.createElement('div');
      outputDiv.className = 'output';
      terminal.insertBefore(outputDiv, commandInput.parentNode);

      let i = 0;
      const interval = setInterval(() => {
        if (i < text.length) {
          const char = text[i];
          outputDiv.innerHTML += char === '\n' ? '<br>' : char;
          scrollToBottom();
          i++;
        } else {
          clearInterval(interval);
        }
      }, TYPING_SPEED);
    }

    function fakeLoading(callback) {
      const loadingDiv = document.createElement('div');
      loadingDiv.className = 'output';
      loadingDiv.innerText = 'Loading...';
      terminal.insertBefore(loadingDiv, commandInput.parentNode);
      scrollToBottom();

      setTimeout(() => {
        loadingDiv.remove();
        callback();
      }, isMobile ? 300 : 400);
    }

    function clearTerminal() {
      const outputs = terminal.querySelectorAll('.output, .line');
      outputs.forEach(output => {
        if (output !== commandInput.parentNode) {
          output.remove();
        }
      });
      addStaticOutput(welcomeMessage);
      addStaticOutput("Type <b>help</b> to get started.");
    }

    function addStaticOutput(text) {
      const div = document.createElement('div');
      div.className = 'output';
      div.innerHTML = text.replace(/\n/g, '<br>');
      terminal.insertBefore(div, commandInput.parentNode);
      scrollToBottom();
    }

    function autoComplete() {
      const input = commandInput.value.trim();
      const possible = Object.keys(commands).filter(cmd => cmd.startsWith(input));
      if (possible.length === 1) {
        commandInput.value = possible[0];
      }
    }

    function scrollToBottom() {
      terminal.scrollTop = terminal.scrollHeight;
    }
  </script>
</body>
</html>
